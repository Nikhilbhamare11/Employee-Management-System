<div class="page-wrapper">
    <div class="employee-card">
        <div class="header">
            <div class="header-icon">
                <i class="fa-solid fa-pen-to-square"></i>
            </div>
            <div>
                <h2>Update Employee</h2>
                <p class="subtitle">Modify existing employee and address records</p>
            </div>
        </div>

        <form #empForm="ngForm" (ngSubmit)="onSubmit(empForm)" class="form">
            <div class="form-row">
                <div class="input-group">
                    <label><i class="fa-solid fa-id-badge"></i> Employee ID</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-hashtag"></i>
                        <input type="number" [(ngModel)]="newEmployee.id" name="id" placeholder="Enter ID to search"
                            #idField="ngModel" (blur)="fetchEmployee()" required>
                    </div>

                    @if (idField.invalid && idField.touched) {
                    <small class="error-text">Employee ID is required to search.</small>
                    }
                    @if (idNotFound) {
                    <small class="error-text">Employee ID does not exist in our records.</small>
                    }
                    @if (idFound) {
                    <small class="success-text">Record found! You can now edit the details.</small>
                    }
                </div>

                <div class="input-group wide">
                    <label><i class="fa-solid fa-user"></i> Full Name</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-signature"></i>
                        <input type="text" class="input-text" [(ngModel)]="newEmployee.name" name="name"
                            placeholder="Full Name will appear here" #nameField="ngModel" required>
                    </div>
                </div>
            </div>
            <div class="address-box">
                <h3><i class="fa-solid fa-location-dot"></i> Address Information</h3>
                <div class="input-group">
                    <label>Building / House No.</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-building"></i>
                        <input type="text" class="input-text" [(ngModel)]="newEmployee.a.building_no" name="bno"
                            placeholder="Flat 204, Galaxy Apt" #buildField="ngModel" required>
                    </div>
                    @if (buildField.invalid && buildField.touched) {
                    <small class="error-text">Building/House No. is required.</small>
                    }
                </div>
                <div class="input-group">
                    <label>Area / Landmark</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-map"></i>
                        <input type="text" class="input-text" [(ngModel)]="newEmployee.a.landmark" name="land"
                            placeholder="Near Railway Station" #landField="ngModel" required>
                    </div>
                    @if (landField.invalid && landField.touched) {
                    <small class="error-text">Area/Landmark is required.</small>
                    }
                </div>
                <div class="input-group">
                    <label>Pincode</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-envelope"></i>
                        <input type="number" [(ngModel)]="newEmployee.a.pincode" name="pin" placeholder="400001"
                            #pinField="ngModel" required>
                    </div>
                    @if (pinField.invalid && pinField.touched) {
                    <small class="error-text">Pincode is required.</small>
                    }
                </div>
            </div>
            <div class="button-row">
                <button type="submit" class="btn-primary" [disabled]="empForm.invalid || idNotFound">
                    <i class="fa-solid fa-arrows-rotate"></i> Update Record
                </button>
                <button type="button" class="btn-danger" (click)="resetForm()">
                    <i class="fa-solid fa-xmark"></i> Cancel
                </button>
            </div>
        </form>
    </div>
</div>